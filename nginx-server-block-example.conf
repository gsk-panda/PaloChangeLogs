# Example NGINX Server Block Configuration for Palo ChangeLogs
# 
# This is an example of how to configure a complete server block that includes
# the Palo ChangeLogs application alongside other applications.
#
# Copy this file to /etc/nginx/conf.d/your-domain.conf and customize as needed.
# Or include these location blocks in your existing server block.

# First, make sure the upstream is included in your http block in /etc/nginx/nginx.conf:
# http {
#     include /etc/nginx/conf.d/palo-changelogs-upstream.conf;
#     ...
# }

server {
    listen 80;
    server_name your-domain.com;
    
    # Redirect HTTP to HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    # SSL Configuration
    ssl_certificate /path/to/your/certificate.crt;
    ssl_certificate_key /path/to/your/private.key;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
    
    # Logging
    access_log /var/log/nginx/your-domain-access.log;
    error_log /var/log/nginx/your-domain-error.log;
    
    # Client settings
    client_max_body_size 10M;
    
    # Include Palo ChangeLogs locations
    # IMPORTANT: This must be inside the server block!
    include /etc/nginx/conf.d/palo-changelogs-locations.conf;
    
    # Example: Other application locations
    # location /app1 {
    #     proxy_pass http://localhost:8080;
    #     ...
    # }
    
    # Example: Another application
    # location /app2 {
    #     root /var/www/app2;
    #     try_files $uri $uri/ =404;
    # }
    
    # Default location (optional)
    # location / {
    #     return 404;
    # }
}

