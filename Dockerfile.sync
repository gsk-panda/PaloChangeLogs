# Dockerfile for database sync service
FROM node:20-alpine

WORKDIR /app

# Install dependencies
COPY package*.json ./
RUN npm install --omit=dev

# Copy sync script
COPY deploy/sync-daily-logs.js ./deploy/

# Create data directory
RUN mkdir -p /app/data && \
    chown -R node:node /app

USER node

CMD ["node", "/app/deploy/sync-daily-logs.js"]
